# Python GUI 打包编译工具项目方案（简化版）

## 项目概述

本项目旨在开发一个基于 Python 的 CTK (CustomTkinter) 库的 GUI 应用程序，用于打包和编译 Python 项目。该工具将集成 pyinstaller 和 nuitka 两种主流的 Python 打包工具，提供直观的图形界面来配置和执行打包操作。

## 技术栈

- **GUI 框架**: CustomTkinter (CTK)
- **打包工具**: PyInstaller + Nuitka
- **编程语言**: Python 3.8+
- **操作系统**: Windows (主要目标)

## 项目结构

```
py_pack_gui/
├── main.py                 # 主程序入口
├── requirements.txt        # 依赖包列表
├── assets/                 # 资源文件夹
│   ├── icons/             # 图标文件
│   └── themes/            # 主题文件
├── ui/                    # 用户界面模块
│   ├── __init__.py
│   ├── main_window.py     # 主窗口
│   ├── pyinstaller_tab.py # PyInstaller标签页
│   ├── nuitka_tab.py      # Nuitka标签页
│   └── process_tab.py     # 打包过程标签页
└── utils/                 # 工具模块
    ├── __init__.py
    └── file_utils.py      # 文件操作工具
```

## 功能模块设计

### 1. 主窗口模块 (main_window.py)

- **功能**: 应用程序的主窗口，包含整体布局
- **组件**:
  - 标签页控件 (PyInstaller/Nuitka/打包过程)
  - 顶部菜单栏
  - 底部状态栏

### 2. PyInstaller标签页 (pyinstaller_tab.py)

- **功能**: 配置PyInstaller打包参数
- **组件**:
  - 脚本路径选择
  - 输出目录选择
  - 打包模式选择 (单文件/单目录)
  - 应用名称设置
  - 图标选择
  - 控制台/窗口模式选择
  - 附加参数输入框
  - 开始打包按钮

### 3. Nuitka标签页 (nuitka_tab.py)

- **功能**: 配置Nuitka打包参数
- **组件**:
  - 脚本路径选择
  - 输出目录选择
  - 编译选项 (独立模式/模块模式)
  - 应用名称设置
  - 图标选择
  - 优化级别选择
  - 包含/排除模块配置
  - 附加参数输入框
  - 开始打包按钮

### 4. 打包过程标签页 (process_tab.py)

- **功能**: 显示打包过程和结果
- **组件**:
  - 输出文本框
  - 复制输出按钮
  - 清空输出按钮
  - 停止打包按钮
  - 进度条
  - 状态指示器
  - 打开输出目录按钮

## 核心功能流程

### 打包编译流程

1. 用户启动应用程序
2. 选择打包工具标签页 (PyInstaller/Nuitka)
3. 配置打包参数
4. 点击"开始打包"
5. 自动切换到打包过程标签页
6. 显示打包进度和输出
7. 打包完成后显示结果

## 参数配置方案

### PyInstaller 主要参数

- **基础参数**:
  - 脚本路径
  - 输出目录 (`--distpath`)
  - 应用名称 (`--name`)
  - 打包模式 (`--onefile`/`--onedir`)
  - 图标 (`--icon`)
  - 控制台/窗口模式 (`--console`/`--windowed`)

- **高级参数**:
  - 隐藏导入 (`--hidden-import`)
  - 排除模块 (`--exclude-module`)
  - UPX压缩 (`--upx-dir`)
  - 附加数据文件 (`--add-data`)

### Nuitka 主要参数

- **基础参数**:
  - 脚本路径
  - 输出目录 (`--output-dir`)
  - 应用名称 (`--output-filename`)
  - 独立模式 (`--standalone`)
  - 模块模式 (`--module`)
  - 图标 (`--windows-icon-from-ico`)

- **高级参数**:
  - Python版本 (`--python-version`)
  - 包含包 (`--include-package`)
  - 包含模块 (`--include-module`)
  - 排除模块 (`--nofollow-import-to`)
  - 优化级别 (`--lto`, `--clang`)
  - 插件 (`--plugin-enable`)

## 用户界面设计

### 1. 主界面布局

```
+--------------------------------------+
|           菜单栏                    |
+--------------------------------------+
|  [PyInstaller] [Nuitka] [打包过程]  |
+--------------------------------------+
|                                      |
|                                      |
|           标签页内容                |
|                                      |
|                                      |
|                                      |
+--------------------------------------+
|           状态栏                    |
+--------------------------------------+
```

### 2. PyInstaller标签页

```
+--------------------------------------+
| 脚本路径: [__________] [浏览]        |
+--------------------------------------+
| 输出目录: [__________] [浏览]        |
+--------------------------------------+
| 应用名称: [__________]               |
+--------------------------------------+
| 图标文件: [__________] [浏览]        |
+--------------------------------------+
| 打包模式: (○)单文件 (●)单目录         |
+--------------------------------------+
| 控制台模式: (●)控制台 (○)窗口         |
+--------------------------------------+
| 隐藏导入: [__________] [添加]         |
|          [导入列表]                   |
+--------------------------------------+
| 排除模块: [__________] [添加]         |
|          [排除列表]                   |
+--------------------------------------+
| 附加参数: [__________________]        |
+--------------------------------------+
|              [开始打包]               |
+--------------------------------------+
```

### 3. Nuitka标签页

```
+--------------------------------------+
| 脚本路径: [__________] [浏览]        |
+--------------------------------------+
| 输出目录: [__________] [浏览]        |
+--------------------------------------+
| 应用名称: [__________]               |
+--------------------------------------+
| 图标文件: [__________] [浏览]        |
+--------------------------------------+
| 编译模式: (●)独立模式 (○)模块模式     |
+--------------------------------------+
| 优化级别: (●)标准 (○)高级 (○)最大     |
+--------------------------------------+
| 包含包: [__________] [添加]           |
|        [包列表]                      |
+--------------------------------------+
| 排除模块: [__________] [添加]         |
|          [排除列表]                   |
+--------------------------------------+
| 附加参数: [__________________]        |
+--------------------------------------+
|              [开始打包]               |
+--------------------------------------+
```

### 4. 打包过程标签页

```
+--------------------------------------+
| 状态: [打包中...]        [停止]      |
+--------------------------------------+
| 进度: [████████████░░░░] 75%          |
+--------------------------------------+
|                                      |
|          输出文本框                   |
|  +--------------------------------+  |
|  | 正在编译...                   |  |
|  | 处理文件...                   |  |
|  | ...                           |  |
|  | 打包完成!                     |  |
|  +--------------------------------+  |
|                                      |
+--------------------------------------+
| [复制输出] [清空输出] [打开输出目录]   |
+--------------------------------------+
```

## 错误处理

### 1. 错误处理策略

- **文件路径错误**: 检查路径有效性，提供友好的错误提示
- **打包工具错误**: 捕获打包工具的输出，解析错误信息
- **配置错误**: 验证用户输入的参数有效性
- **系统错误**: 处理权限、空间等系统级错误

### 2. 错误提示方式

- 使用CTK的对话框显示错误信息
- 在打包过程标签页的输出区域显示详细错误
- 状态栏显示简短错误提示

## 开发计划

### 第一阶段: 基础框架

1. 创建项目结构
2. 实现主窗口和标签页布局
3. 实现PyInstaller标签页UI
4. 实现Nuitka标签页UI
5. 实现打包过程标签页UI

### 第二阶段: 功能实现

1. 实现PyInstaller参数配置和打包功能
2. 实现Nuitka参数配置和打包功能
3. 实现打包过程监控和输出显示
4. 完善错误处理和用户反馈

## 技术难点与解决方案

### 1. 打包工具输出解析

- **问题**: 不同打包工具的输出格式不同，难以统一解析
- **解决方案**: 为每种打包工具实现专门的输出解析器，提取关键信息

### 2. 长时间运行的打包操作

- **问题**: 打包操作可能耗时很长，需要避免界面卡顿
- **解决方案**: 使用多线程执行打包操作，通过队列传递输出信息

### 3. 参数配置复杂性

- **问题**: PyInstaller和Nuitka参数众多，用户难以配置
- **解决方案**: 提供常用参数的预设选项，简化配置过程

## 总结

本项目旨在创建一个简洁易用的Python打包工具GUI，通过集成PyInstaller和Nuitka，提供直观的界面来配置和执行打包操作。项目采用简化设计，只包含三个主要标签页，降低复杂度，提高用户体验。